an initial reference or span to the whole of the original file is created with subsequent inserts and deletes being created as combinations of one two or three references to sections of either the original document or of the spans associated with earlier inserts typically the text of the original document is held in one immutable block and the text of each subsequent insert is stored in new immutable blocks because even deleted text is still included in the piece table this makes multi level or unlimited undo easier to implement with a piece table than with alternative data structures such as a gap buffer this data structure was invented by j strother moore for this description we use buffer as the immutable block to hold the contents a piece table consists of three columns in addition to the table two buffers are used definition codice 1 return the character at position i to retrieve the i th character the appropriate entry in a piece table is read given the following buffers and piece table to access the i th character the appropriate entry in the piece table is looked up for instance to get the value of codice 2