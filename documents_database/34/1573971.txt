a western front was opened in august 1907 with the bombardment of casablanca in the west french forces then pushed into the shawiya plain in what french historians call the pacification de la chaouia in 1911 france occupied the city of fes at the behest of sultan abd al hafid which led to the agadir crisis on 30 march 1912 sultan abd al hafid signed the treaty of fes formally ceding moroccan sovereignty to france transforming morocco into a protectorate of france and sparking the 1912 fez riots although the sultan and the makhzen had consented to the treaty many regions remained in revolt until 1934 when morocco was declared pacified in several regions french authority was maintained by cooperation with local chiefs and not by military strength on 17 april 1912 moroccan infantrymen mutinied in the french garrison in fez the moroccans were unable to take the city and were defeated by a french relief force in late may 1912 moroccan forces unsuccessfully attacked the enhanced french garrison at fez the last resistance to the conquest of morocco occurred in 1933 34 the conquest of morocco took over 22 years in the battle of sidi bou othman in 1912