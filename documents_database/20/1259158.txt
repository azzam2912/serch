to encapsulate an ip packet in another ip packet an outer header is added with codice 1 the entry point of the tunnel and the codice 2 point the exit point of the tunnel while doing this the inner packet is unmodified except the codice 3 field which is decremented the codice 4 and the codice 5 fields should be copied to the outer packet if the packet size is greater than the codice 6 the packet is fragmented in the encapsulator as the outer header should be included the decapsulator will reassemble the packet outer ip header have the following fields version 4 bitsthis field is the protocol version number it is always 4 as ip in ip is supported for ipv4 header length 4 bits this field is the length of outer ip header type of service tos 8 bits this field is copied from the inner ip header total length 16 bits this field is the length of the encapsulated ip packet including outer ip header inner ip header ip payload identification 16 bits this field is used to identify the fragments of a datagram which will be helpful while reassembling the datagrams as encapsulator might fragment