pmtud was originally intended for routers in internet protocol version 4 ipv4 however all modern operating systems use it on endpoints in ipv6 this function has been explicitly delegated to the end points of a communications session pmtud is standardized for ipv4 in rfc 1191 and for ipv6 in rfc 8201 which obsoleted rfc 1981 the previous ipv6 pmtud standard rfc 4821 describes an extension to the techniques that works without support from internet control message protocol for ipv4 packets path mtu discovery works by setting the don t fragment df flag bit in the ip headers of outgoing packets then any device along the path whose mtu is smaller than the packet will drop it and send back an internet control message protocol icmp fragmentation needed type 3 code 4 message containing its mtu allowing the source host to reduce its path mtu appropriately the process is repeated until the mtu is small enough to traverse the entire path without fragmentation ipv6 routers do not support fragmentation and consequently don t support the don t fragment option for ipv6 path mtu discovery works by initially assuming the path mtu is the same as the mtu on the link layer