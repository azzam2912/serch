it was written by russell t davies and directed by richard clark the episode is set five billion years in the future on the planet new earth a planet humanity settled on following the destruction of the earth in the 2005 episode the end of the world in the episode alien time traveller the doctor david tennant and his new travelling companion martha jones freema agyeman discover the remainder of humanity on the planet live in perpetual gridlock within the motorway a highway system beneath the city state of new new york when martha is kidnapped the doctor races to find her before she enters the dangerous fast lane gridlock completes a loose trilogy that began with the end of the world and new earth 2006 and contains hints at the series story arc the story is designed to show how the doctor can bring hope into a world production of gridlock took place in september and october 2006 much of the episode was filmed in studio and used a large amount of computer generated imagery so it appeared to be set in a cgi world some location filming was done in cardiff most notably at the temple of peace